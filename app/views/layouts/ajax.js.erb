(function(){
  var location = '<%= @location %>';
  var template = '<%= escape_javascript render file: @file %>';
  var alert = '<%= escape_javascript render partial: "layouts/alert",
                                             collection: flash[:alert] %>';
  $('.content').html(template).prepend(alert);

  // Change url.
  history.pushState( null, null, location );
})();